{% if docsPrefix == 'pe/' %}
{% assign appPrefix = "ThingsBoard PE" %}
{% else %}
{% assign appPrefix = "ThingsBoard" %}
{% endif %}

* TOC
{:toc}

移动操作是 [小部件操作](/docs/{{docsPrefix}}user-guide/ui/widget-actions/) 的一种特殊子类型，允许使用各种移动设备功能，如拍照、扫描二维码、获取设备位置、拨打电话等。移动操作的结果可以通过特殊的 java-script 函数进行处理，允许您执行进一步的处理，例如将拍摄的照片或设备位置保存到实体属性，将扫描的二维码用于设备认领等。

## 配置

您可以在仪表板小部件配置中配置移动操作：

{% if docsPrefix == 'pe/' %}
1. 通过屏幕左侧的主菜单转到 **仪表板组**；
2. 打开目标仪表板组；
{% else %}
3. 通过屏幕左侧的主菜单转到 **仪表板**；
{% endif %}
4. 单击要修改的仪表板；
5. 在打开的仪表板详细信息中，单击 **打开仪表板** 按钮；
6. 使用屏幕右下角的 **铅笔** 按钮进入仪表板编辑模式；
7. 通过单击小部件右上角的铅笔图标编辑目标小部件；
8. 在小部件的编辑模式下，转到最后一个单元格 **操作**；
9. 单击窗口右侧的 “+” 图标以添加新操作；
10. 在 **类型** 下拉菜单中，选择 *移动操作* 操作类型；
11. 在 **移动操作类型** 下拉菜单中，选择要设置的移动操作类型；
12. 根据所选的移动操作类型，使用 java-script 函数配置您自己的处理逻辑。<br>使用帮助按钮打开有关函数定义和示例的详细信息；

{% include images-gallery.html imageCollection="mobile-actions" %}

## 从图库中拍照

该操作打开图像库选择器以选择图片。它以 base64 数据格式的 URL 返回所选图像。
您可以配置 **processImage** 函数来处理结果图像数据。例如，图像可以存储为实体属性值，这允许以后使用小部件显示它。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 拍照

该操作打开手机摄像头以拍照。它以 base64 数据格式的 URL 返回捕获的照片图像。
您可以配置 **processImage** 函数来处理结果图像数据。例如，图像可以存储为实体属性值，这允许以后使用小部件显示它。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 打开地图路线

该操作采用纬度/经度格式提供的地理位置，并打开可用的地图应用程序以显示可能的路线。
您应该配置 **getLocation** 函数来准备位置数据。
例如，您可以从当前实体属性中提取纬度/经度值，外部地图应用程序将向用户显示到目标实体的可能路线。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 打开地图位置

该操作采用纬度/经度格式提供的地理位置，并打开可用的地图应用程序在地图上显示该位置。
您应该配置 **getLocation** 函数来准备位置数据。
例如，您可以从当前实体属性中提取纬度/经度值，外部地图应用程序将向用户显示目标实体位置。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 扫描二维码

该操作打开二维码扫描仪以扫描二维码。它返回扫描的二维码值。
您可以配置 **processQrCode** 函数来处理结果二维码。
例如，二维码可用于设备认领场景。
二维码的值可以表示为包含 **设备名称** 和 **密钥** 的设备认领信息。
用户扫描二维码，然后将其解析为用于执行设备认领的设备认领信息。
有关详细信息，请参阅 [认领设备](/docs/{{docsPrefix}}user-guide/claiming-devices/)。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 拨打电话

该操作采用提供的电话号码并打开关联的应用程序以拨打电话。
您应该配置 **getPhoneNumber** 函数以返回电话号码。
例如，您可以从当前实体属性中提取电话号码值，用户将被定向到适当的电话应用程序以拨打电话。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 获取手机位置

该操作使用位置服务获取当前手机位置。它以纬度和经度值对的形式返回位置。
您可以配置 **processLocation** 函数来处理结果位置数据。
例如，位置数据可以存储为实体属性值，以设置或更新要在地图小部件中显示的实体的当前位置。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。

## 截屏

该操作捕获当前手机屏幕。它以 base64 数据格式的 URL 返回捕获的屏幕图像。
您可以配置 **processImage** 函数来处理结果图像数据。例如，图像可以存储为实体属性值，这允许以后使用小部件显示它。

请参阅 [移动操作配置](#configuration) 以了解如何配置此操作。